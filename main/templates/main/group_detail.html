{% extends 'base.html' %}
{% load custom_tags %}

{% block title %}{{ group.name }} - –£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å{% endblock %}

{% block content %}
<h1>–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</h1>

<a href="{% url 'main:student_create' %}?group={{ group.id }}" class="btn btn-success mb-3">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ —ç—Ç—É –≥—Ä—É–ø–ø—É</a>
<table class="table table-bordered">
    <thead class="table-light">
        <tr>
            <th>#</th>
            <th>–§–ò–û</th>
            {% for subject in subjects %}
                <th>{{ subject.title }}</th>
            {% endfor %}
            <th>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</th>
        </tr>
    </thead>
    <tbody>
        {% for entry in student_data %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ entry.student.name }}</td>
            {% for subject in subjects %}
                <td>{{ entry.grades|get_item:subject.title }}</td>
            {% endfor %}
            <td><strong>{{ entry.avg }}</strong></td>
            <td>
        <a href="{% url 'main:student_edit' entry.student.id %}" class="btn btn-sm btn-warning">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
        <a href="{% url 'main:student_delete' entry.student.id %}" class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if best %}
<div class="mt-4">
    <h5>üîù –õ—É—á—à–∏–π —Å—Ç—É–¥–µ–Ω—Ç: <strong>{{ best.student.name }}</strong> ‚Äî {{ best.avg }}</h5>
    <h5>üîª –•—É–¥—à–∏–π —Å—Ç—É–¥–µ–Ω—Ç: <strong>{{ worst.student.name }}</strong> ‚Äî {{ worst.avg }}</h5>
</div>
{% endif %}

<a href="{% url 'main:home' %}" class="btn btn-secondary mt-4">‚Üê –ù–∞–∑–∞–¥</a>
{% endblock %}
